{"version":3,"file":"aggregate.js","mappings":"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","sources":["webpack:///../../node_modules/brei-project-utils/utils.js","webpack:///./modules/aggregate.js","webpack:///./modules/textarea.js","webpack:///./modules/forms.js","webpack:///./lib/plugin.js","webpack:///./aggregate.js"],"sourcesContent":["/**\n * @name arrow\n * @returns {string}\n */\nconst arrow = function arrow() {\n\treturn `<div class=\"arrow\" role=\"presentation\">\n\t\t\t\t<div class=\"arrow__icon\">${iconTemplate('chevron')}</div>\n\t\t\t</div>`;\n};\n\n/**\n * @name buildQuery\n * @param {object} data\n * @returns {string}\n */\nconst buildQuery = function buildQuery(data) {\n\t// Create an array to hold the key/value pairs\n\tlet query = [];\n\n\t// Loop through the data object\n\tfor (let key in data) {\n\t\tif (data.hasOwnProperty(key)) {\n\t\t\tif (Array.isArray(data[key])) {\n\t\t\t\tdata[key].forEach(function (value) {\n\t\t\t\t\tquery.push(key + '=' + encodeURIComponent(value));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tquery.push(key + '=' + encodeURIComponent(data[key]));\n\t\t\t}\n\t\t}\n\t}\n\n\t// Join each item in the array with an '&' and return the resulting string\n\tquery = query.join('&');\n\n\treturn query;\n};\n\n/**\n * @name closeButton\n * @param {string} style\n * @param {string} label\n */\nconst closeButton = function closeButton(style, label, dataSelector) {\n\treturn `<button class=\"close-button${(style && style.length > 0) ? (' ' + style) : ''}\" aria-label=\"${label}\"${((dataSelector) ? ' data-selector=\"' + dataSelector + '\"' : '')} tabindex=\"0\">${iconTemplate('close')}</button>`;\n};\n\n/**\n * @name dirButton\n * @param {string} style\n * @param {string} label\n * @returns {string}\n */\nconst dirButton = function dirButton(url, style, label) {\n\treturn `<a href=\"${(url && url !== '') ? url : '#'}\" class=\"dir-button${((style !== '') ? (' ' + style) : '')}\" aria-label=\"${label}\">${iconTemplate('chevron')}</a>`;\n};\n\n/**\n * @name filterChip\n * @param {string} id\n * @returns {string}\n */\nconst filterChip = function filterChip(id) {\n\treturn `<button class=\"filter-chip\" data-target=\"${id}\" tabindex=\"0\"><span class=\"filter-chip__text\">${$(id).val()}</span><div class=\"filter-chip__icon\" role=\"presentation\">${iconTemplate('x')}</div></button>`;\n};\n\n/**\n * @name getData\n * @param {string} url\n * @param {string} data\n * @param {string} type\n * @returns {object}\n */\nconst getData = function getData(url, data, type) {\n\tconst deferred = $.Deferred();\n\n\t$.ajax({\n\t\turl: url,\n\t\tmethod: 'GET',\n\t\tdata: data,\n\t\tdataType: type,\n\t\tsuccess(data) {\n\t\t\tdeferred.resolve(data);\n\t\t},\n\t\terror(jqXHR, textStatus) {\n\t\t\tdeferred.reject(textStatus);\n\t\t}\n\t});\n\n\treturn deferred.promise();\n};\n\n/**\n * @name getRandomNumber\n * @returns {number}\n * @description // Returns a 10 digit, random number\n */\nconst getRandomNumber = function getRandomNumber() {\n\treturn Math.floor(Math.random() * 9000000000) + 1000000000;\n};\n\n/**\n * @name iconTemplate\n * @param {string} name\n * @returns {string}\n */\nconst iconTemplate = function iconTemplate(name) {\n\treturn `\n\t\t<svg class=\"brei-icon brei-icon-${name}\" aria-hidden=\"true\">\n\t\t\t<use href=\"#brei-icon-${name}\"></use>\n\t\t</svg>\n\t`;\n};\n\n/**\n * @name mql\n * @const {object}\n */\nconst mql = {\n\tsmall: window.matchMedia('(min-width: 400px)'),\n\tmedium: window.matchMedia('(min-width: 768px)'),\n\tlarge: window.matchMedia('(min-width: 1024px)'),\n\txlarge: window.matchMedia('(min-width: 1200px)'),\n\txxlarge: window.matchMedia('(min-width: 1440px)'),\n\txxxlarge: window.matchMedia('(min-width: 1920px)')\n};\n\n/**\n * @name queryStringToJSON\n * @param {string} qs\n * @returns {object}\n */\nconst queryStringToJSON = function queryStringToJSON(qs) {\n\tqs = qs || window.location.search.slice(1);\n\n\tlet pairs = qs.split('&');\n\tlet result = {};\n\n\tpairs.forEach(function (p) {\n\t\tlet pair = p.split('=');\n\t\tlet key = pair[0];\n\t\tlet value = decodeURIComponent(pair[1] || '');\n\n\t\tif(result[key]) {\n\t\t\tif(Object.prototype.toString.call(result[key]) === '[object Array]') {\n\t\t\t\tresult[key].push(value);\n\t\t\t} else {\n\t\t\t\tresult[key] = [result[key], value];\n\t\t\t}\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\t});\n\n\treturn JSON.parse(JSON.stringify(result));\n};\n\n/**\n * @name ready\n * @param {func} callbackFunc\n * @description On DOM ready, execute callback function\n */\nconst ready = function ready(callbackFunc) {\n\t// Document is ready; call the callback function\n\tif (document.readyState !== 'loading') {\n\t\tcallbackFunc();\n\t\t// Modern browsers\n\t} else if (document.addEventListener) {\n\t\tdocument.addEventListener('DOMContentLoaded', callbackFunc, false);\n\t\t// Old IE browsers (IE <= 8)\n\t} else {\n\t\tdocument.attachEvent('onreadystatechange', function () {\n\t\t\tif (document.readyState === 'complete') {\n\t\t\t\tcallbackFunc();\n\t\t\t}\n\t\t});\n\t}\n};\n\n/**\n * @name scrollToTop\n * @param {object} element\n * @param {number} duration\n */\nconst scrollToTop = function scrollToTop(element, duration) {\n\t$('html, body').animate({\n\t\tscrollTop: element.offset().top\n\t}, duration);\n};\n\n/**\n * @name speechBubble\n * @param {string} style\n * @param {string} text\n * @returns {string}\n */\nconst speechBubble = function speechBubble(style, id, text) {\n\treturn `\n\t\t<div id=\"${id}\" class=\"speech-bubble${(style && style.length > 0) ? (' ' + style) : ''}\" role=\"tooltip\">\n\t\t\t<span class=\"speech-bubble__text\">${text}</span>\n\t\t\t${closeButton('close-button--light close-button--small', 'Click to close tooltip')}\n\t\t</div>\n\t`;\n};\n\nconst _extends = Object.assign || function (target) { for (let i = 1; i < arguments.length; i++) { let source = arguments[i]; for (let key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst utils = {\n\tarrow,\n\tbuildQuery,\n\tcloseButton,\n\tdirButton,\n\tfilterChip,\n\tgetData,\n\tgetRandomNumber,\n\ticonTemplate,\n\tmql,\n\tqueryStringToJSON,\n\tready,\n\tscrollToTop,\n\tspeechBubble,\n\t_extends\n};\n\nexport {\n\tarrow,\n\tbuildQuery,\n\tcloseButton,\n\tdirButton,\n\tfilterChip,\n\tgetData,\n\tgetRandomNumber,\n\ticonTemplate,\n\tmql,\n\tqueryStringToJSON,\n\tready,\n\tscrollToTop,\n\tspeechBubble,\n\t_extends\n};\n\nexport { utils as default };\n","// import {scrollToTop} from '../lib/utils';\n// import {throttle} from '../lib/throttle';\n\nconst aggregate = {\n\n\telem: {\n\t\t//$checkboxes: $('.filter__item--checkboxes'),\n\t\t$checkboxes: $('.filter__content'),\n\t\t$chips: $('#results_chips'),\n\t\t//$count: $('#aggregate__count'),\n\t\t//$keywords: $('.filter__keyword'),\n\t\t$keywords: $('.filter-keyword'),\n\t\t$pagination: $('.pagination'),\n\t\t$reset: $('.aggregate__reset'),\n\t\t$results: $('.aggregate__results'),\n\t\t$selects: $('.filter-selectbox')\n\t},\n\n\tdataSource: null,\n\tfilters: {},\n\tinitial: true,\n\tresults: '',\n\tsuggestions: '',\n\t\n\t// initialize the search aggregate\n\tinit() {\n\t\tthis.dataSource = this.elem.$results.data('src'); // set the data source to the data-src attribute of $results\n\t\tthis.buildFilters(); // build the state machine from the filters present on the page\n\t\tthis.getQuery(); // parse the query string to a specific request has been passed to the page, and update the state accordingly\n\t\tthis.setControls(); // update the filters based on the current state\n\t\tthis.buildChips(); // update the chips based on the current state\n\t\tthis.setQuery(false, false); // update the query string based on the current state\n\t\twindow.onpopstate = this.filterState; // run this function when the user navigates using the browser previous/next buttons\n\t\tthis.elem.$reset.on('click', this.filterReset); // run this function when the user clicks the \"clear all\" option\n\t},\n\n\t// rebind functions to filters after successfully updating the state\n\tbindUIActions() {\n\t\tthis.elem.$checkboxes.find('input').on('change', this.filterCheckbox);\n\t\tthis.elem.$keywords.find('button').on('click', this.filterKeyword);\n\t\tthis.elem.$keywords.find('input').on('keydown', this.filterKeyword);\n\t\tthis.elem.$selects.find('select').on('change', this.filterSelect);\n\t},\n\n\t// unbind UI from the filters while in the process of updating the state\n\tunbindUIActions() {\n\t\tthis.elem.$checkboxes.find('input').off('change');\n\t\tthis.elem.$keywords.find('button').off('click');\n\t\tthis.elem.$selects.find('select').off('change', this.filterSelect);\n\t},\n\n\t// add a new chip to the list of chips and bind the unfilterChip action to it\n\taddChip(key, label) {\n\t\tlet output = '<a href=\"#' + key + '\" class=\"chip\"><span class=\"chip__close\"><span class=\"show-for-sr\">Remove this filter</span><svg class=\"brei-icon brei-icon-close\" focusable=\"false\"><use href=\"#brei-icon-close\"></use></svg></span><span class=\"chip__label\">' + label + '</span></a>';\n\t\t$('.aggregate__chips').prepend(output);\n\t\t$('.chip[href=\"#' + key + '\"]').on('click', aggregate.unfilterChip);\n\t},\n\n\t// remove a chip from the list of chips\n\tremoveChip(key) {\n\t\t$('.chip[href=\"#' + key + '\"]').remove();\n\t},\n\n\t// update the state when a chip is clicked\n\tunfilterChip(e) {\n\t\te.preventDefault();\n\t\tlet target = e.currentTarget.hash;\n\t\tlet value = target.substr(1);\n\n\t\t// if the filter is a checkbox, click it (which will unselect it and trigger a refresh)\n\t\tif( $(target)[0].type === 'checkbox' ) {\n\t\t\t$(target).trigger('click');\n\t\t}\n\n\t\t// if the filter is a keyword search, zero its value and the pageindex, and update the query\n\t\tif( $(target)[0].type === 'search' ) {\n\t\t\t$(e.currentTarget).remove();\n\t\t\t$(target)[0].value = '';\n\t\t\taggregate.filters[value] = '';\n\t\t\taggregate.filters['pageindex'] = 0;\n\t\t\taggregate.setQuery(true, true);\n\t\t}\n\n\t\t// if the filter is a selectbox, set the selectedIndex to -1 and trigger the change event\n\t\tif( $(target)[0].localName === 'select' ) {\n\t\t\t$(target)[0].selectedIndex = -1;\n\t\t\t$(target).siblings('.selectability').find('[role=\"textbox\"]')[0].innerHTML = ''; // if you are using the selectability script, zero out the value of the textbox it uses for displaying the curent value\n\t\t\t$(target).trigger('change').removeClass('js-selectability--has-value');\n\t\t}\n\t},\n\n\t// build chips from filter array\n\tbuildChips() {\n\t\tfor (let key in aggregate.filters) {\n\t\t\tlet keyid = '#' + key;\n\t\t\tlet label = '';\n\t\t\tif (aggregate.filters.hasOwnProperty(key)) {\n\t\t\t\t// if the filter is an array (checkbox) add an item for each item in the array\n\t\t\t\tif (Array.isArray(aggregate.filters[key])) {\n\t\t\t\t\tif (aggregate.filters[key].length > 0 ) {\n\t\t\t\t\t\tfor (let i = 0; i < aggregate.filters[key].length; i = i + 1) {\n\t\t\t\t\t\t\tlet keycheck = key + '-' + aggregate.filters[key][i];\n\t\t\t\t\t\t\tlabel = $('#' + keycheck).siblings('label')[0].innerText;\n\t\t\t\t\t\t\taggregate.addChip(keycheck, label);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// if the filter is not the pagindex or pagesize parameter\n\t\t\t\t\tif((key !== 'pageindex') && (key !== 'pagesize') && (aggregate.filters[key] !== '')) {\n\t\t\t\t\t\t// if the filter is an input, set the label to the value\n\t\t\t\t\t\tif( $(keyid)[0].localName === 'input') {\n\t\t\t\t\t\t\tlabel = $(keyid)[0].value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if the filter is a label, set the label to the text of the seleted option\n\t\t\t\t\t\tif( $(keyid)[0].localName === 'select') {\n\t\t\t\t\t\t\tlabel = $(keyid)[0].options[$(keyid)[0].selectedIndex].text;\n\t\t\t\t\t\t}\n\t\t\t\t\t\taggregate.addChip(key, label);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// build the filter array from the elements on the page\n\tbuildFilters() {\n\t\tif(aggregate.elem.$keywords.length > 0) {\n\t\t\taggregate.filters['search'] = '';\n\t\t}\n\t\t//  for each group of checkboxes to the page, add an array with a name equal to the legend\n\t\tif(aggregate.elem.$checkboxes.length > 0) {\n\t\t\taggregate.elem.$checkboxes.each(function() {\n\t\t\t\taggregate.filters[$(this).find('legend')[0].innerText] = [];\n\t\t\t});\n\t\t}\n\t\t// for each keyword search (there should only be one) add a string with a name equal to the id\n\t\tif(aggregate.elem.$keywords.length > 0) {\n\t\t\taggregate.elem.$keywords.each(function() {\n\t\t\t\taggregate.filters[$(this).find('input')[0].id] = '';\n\t\t\t});\n\t\t}\n\t\t// for each selectbox, add a string wiith a name equal to the id\n\t\tif(aggregate.elem.$selects.length > 0) {\n\t\t\taggregate.elem.$selects.each(function() {\n\t\t\t\taggregate.filters[$(this).find('select')[0].id] = '';\n\t\t\t});\n\t\t}\n\t\t// set initial pageindex to 0 and initial pagesize to 10\n\t\taggregate.filters['pageindex'] = 0;\n\t\taggregate.filters['pagesize'] = 10;\n\t},\n\n\t// build a query string from the filters\n\tbuildQuery() {\n\t\tlet data = this.filters;\n\t\tlet query = [];\n\t\tfor (let key in data) {\n\t\t\tif (data.hasOwnProperty(key)) {\n\t\t\t\tif (Array.isArray(key)) {\n\t\t\t\t\tdata[key] = key.toString();\n\t\t\t\t}\n\t\t\t\tquery.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));\n\t\t\t}\n\t\t}\n\t\tquery = query.join('&').replace(/%2C/g, ',');\n\t\treturn query;\n\t},\n\n\t// filtering on checkbox click\n\tfilterCheckbox(e) {\n\t\tlet key = e.currentTarget.id.substring(0, e.currentTarget.id.indexOf('-'));\n\t\tlet value = e.currentTarget.value;\n\t\tlet label = $(e.currentTarget).siblings('label')[0].innerText;\n\t\tlet status = e.currentTarget.checked;\n\n\t\t// if the checkbox is checked, add a chip and add it to the state\n\t\tif(status) {\n\t\t\taggregate.addChip(key + '-' + value, label);\n\t\t\taggregate.filters[key].push(value);\n\t\t// otherwise, remove the chp and splice it out of the state\n\t\t} else {\n\t\t\taggregate.removeChip(key + '-' + value);\n\t\t\taggregate.filters[key].splice(aggregate.filters[key].indexOf(value),1);\n\t\t}\n\t\taggregate.filters['pageindex'] = 0; // reset the page index\n\t\taggregate.setQuery(true, true); // set the query\n\t},\n\n\t// filtering on keyword submit\n\tfilterKeyword(e) {\n\t\tlet filter = false;\n\t\tlet key = '';\n\n\t\t// if the triggering event is a keydown inside the input, only trigger if there is a return\n\t\t/// set the key to the id of the input\n\t\tif ((e.type === 'keydown') && (e.keyCode === 13)) {\n\t\t\tkey = $(e.currentTarget)[0].id;\n\t\t\tfilter = true;\n\t\t}\n\n\t\t// if the triggering event is a click on the submit button\n\t\t// set the key to id of the adjacent input\n\t\tif (e.type === 'click') {\n\t\t\tkey = $(e.currentTarget).siblings('input')[0].id;\n\t\t\tfilter = true;\n\t\t}\n\n\t\tif (filter) {\n\t\t\te.preventDefault();\n\t\t\tlet value = '<span>' + $('#' + key)[0].value.trim() + '</span>'; // wrap the value in a span because if there's no HTML content the next line will product a blank output\n\t\t\tlet safeValue = $(value).text();\n\t\t\tif(safeValue.length > 0) {\n\t\t\t\taggregate.removeChip(key); // remove any existing chip for the keyword\n\t\t\t\taggregate.addChip(key, safeValue); // add a new chip for the keywords current value\n\t\t\t\taggregate.filters[key] = safeValue; // update the filters\n\t\t\t\taggregate.filters['pageindex'] = 0; // reset the page index\n\t\t\t\taggregate.setQuery(true, true); // set the query\n\t\t\t}\n\t\t}\n\t},\n\n\t// filtering on pagination click\n\tfilterPagination(e) {\n\t\te.preventDefault();\n\t\taggregate.filters['pageindex'] = e.currentTarget.hash.substr(1); // update the pageindex to the new value\n\t\taggregate.setQuery(true, true); // set the query\n\t},\n\n\t// reset all filters\n\tfilterReset() {\n\t\taggregate.unbindUIActions();\n\t\taggregate.elem.$checkboxes.find('input').prop('checked',false);\n\t\taggregate.elem.$keywords.find('input').val('');\n\t\tif(aggregate.elem.$selects.length > 0) {\n\t\t\taggregate.elem.$selects.find('select')[0].selectedIndex = -1;\n\t\t\taggregate.elem.$selects.find('select').siblings('.selectability').find('[role=\"textbox\"]').html('');\n\t\t\taggregate.elem.$selects.find('select').removeClass('js-selectability--has-value');\n\t\t}\n\t\t$('.chip').remove();\n\t\taggregate.buildFilters();\n\t\taggregate.setQuery(true, true);\n\t},\n\n\t// filter on selectbox change\n\tfilterSelect(e) {\n\t\te.preventDefault();\n\t\tlet key = e.currentTarget.id;\n\t\tlet value = e.currentTarget.value;\n\t\taggregate.removeChip(key);\n\t\tif(e.currentTarget.selectedIndex > -1) {\n\t\t\tlet label = e.currentTarget.options[e.currentTarget.selectedIndex].text;\n\t\t\t$(e.currentTarget).siblings('.selectability').find('[role=\"textbox\"]')[0].innerHTML = label;\n\t\t\taggregate.addChip(key, label);\n\t\t}\n\t\taggregate.filters[key] = value;\n\t\taggregate.filters['pageindex'] = 0;\n\t\taggregate.setQuery(true, true);\n\t},\n\n\t// filtering on history state change\n\tfilterState() {\n\t\taggregate.getQuery();\n\t\taggregate.setControls();\n\t\taggregate.setQuery(false, false);\n\t},\n\n\t// get data\n\tgetData(query) {\n\t\tlet deferred = $.Deferred();\n\t\t$.ajax({\n\t\t\turl: aggregate.dataSource,\n\t\t\tmethod: 'GET',\n\t\t\tdata: query,\n\t\t\tdataType: 'html',\n\t\t\tsuccess: function(data) {\n\t\t\t\tdeferred.resolve(data);\n\t\t\t},\n\t\t\terror: function(jqXHR, textStatus, errorThrow) {\n\t\t\t\tconsole.log(jqXHR, errorThrow);\n\t\t\t\tdeferred.reject(textStatus);\n\t\t\t}\n\t\t});\n\t\treturn deferred.promise();\n\t},\n\t\n\t// overwrite default filter settings with values passed through query string, ignoring blank values and values without a filter\n\tgetQuery() {\n\t\tif (window.location.search.length > 0) { \n\t\t\tlet searchParams = new URLSearchParams(window.location.search);\n\t\t\tsearchParams.forEach(function (value,key) {\n\t\t\t\tif(value !== '') {\n\t\t\t\t\tif(aggregate.filters[key] !== undefined) {\t\t\t\t\t\n\t\t\t\t\t\tif (Array.isArray(aggregate.filters[key])) {\n\t\t\t\t\t\t\taggregate.filters[key] = [];\n\t\t\t\t\t\t\tvalue = value.split(',');\n\t\t\t\t\t\t\taggregate.filters[key] = value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taggregate.filters[key] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t// build and render count from retrieved results\n\trenderCount() {\n\t\tlet output = aggregate.filters.pageindex * aggregate.filters.pagesize + 1;\n\t\toutput += '-';\n\t\tlet maxCount = aggregate.filters.pageindex * aggregate.filters.pagesize + 10;\n\t\tif (maxCount > aggregate.results[0].TotalCount) {\n\t\t\tmaxCount = aggregate.results[0].TotalCount;\n\t\t}\n\t\toutput += maxCount;\n\t\toutput += ' of ';\n\t\toutput += aggregate.results[0].TotalCount;\n\t\toutput += ' Results';\n\t\t$('.aggregate__count').html(output);\n\t},\n\n\t// build and render pagination from retrieved results\n\trenderPagination() {\n\t\tlet items = [];\n\t\tlet filters = aggregate.filters;\n\t\tlet current = parseInt(filters['pageindex']);\n\t\tlet max = Math.ceil(parseInt(aggregate.results[0].TotalCount) / parseInt(filters['pagesize'])) - 1;\n\t\tlet output = '<ul class=\"pagination__list clearfix\" aria-label=\"Pagination\">';\n\n\t\t// push all the items we need at a minimum: first, current, last, and output bracketing current\n\t\titems.push(0, current - 1, current, current + 1, max);\n\n\t\t// when the values are close to first or last, push some extra options to ensure that we always have at least four options showing\n\t\tif (current < 2) {\n\t\t\titems.push(2);\n\t\t}\n\t\tif (current > (max - 1)) {\n\t\t\titems.push(max - 2);\n\t\t}\n\t\t\n\t\t// filter out results that are less than zero, or greater than max, then sort\n\t\titems = items.filter(function(x){ return x > -1 });\n\t\titems = items.filter(function(x){ return x <= max });\n\t\titems.sort(function(a, b){return a-b});\n\n\t\t// previous button\n\t\toutput += '<li class=\"pagination__item pagination__item--prev';\n\t\tif(current === 0) {\n\t\t\toutput += ' pagination__item--disabled';\n\t\t}\n\t\toutput += '\"><a href=\"#' + (current - 1) + '\" class=\"pagination__button btn btn--medium\"><span class=\"btn__icon\"><svg class=\"brei-icon brei-icon-chevron\" focusable=\"false\"><use href=\"#brei-icon-chevron\"></use></svg></span><span class=\"show-for-sr\">Previous Page</span></a></li>';\n\n\t\t// individual results\n\t\tfor(let i = 0; i < items.length; i = i + 1) {\n\t\t\tif((i === 0) || (items[i] !== items[i - 1])) {\n\t\t\t\tif((i > 0) && ((items[i] - items[i - 1]) > 1)) {\n\t\t\t\t\toutput += '<li class=\"pagination__item pagination__item--spacer\"><span class=\"pagination__span\">...</span></li>';\n\t\t\t\t}\n\t\t\t\tif(items[i] === current) {\n\t\t\t\t\toutput += '<li class=\"pagination__item pagination__item--active\"><a href=\"#' + items[i] + '\" class=\"pagination__link\" tabindex=\"-1\"><span class=\"show-for-sr\">You\\'re on page</span> ' + (items[i] + 1) + '</a></li>';\n\t\t\t\t} else {\n\t\t\t\t\tlet classy = '';\n\t\t\t\t\tif(i === 0) { classy = ' pagination__item--first' }\n\t\t\t\t\tif(i === (items.length - 1)) { classy = ' pagination__item--last'; }\t\t\t\t\t\n\t\t\t\t\toutput += '<li class=\"pagination__item' + classy + '\"><a href=\"#' + items[i] + '\" class=\"pagination__link\" aria-label=\"Page ' + (items[i] + 1) + '\">' + (items[i] + 1) + '</a></li>';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// next button\n\t\toutput += '<li class=\"pagination__item pagination__item--next';\n\t\tif(current === max) {\n\t\t\toutput += ' pagination__item--disabled';\n\t\t}\n\t\toutput += '\"><a href=\"#' + (current + 1) + '\" class=\"pagination__button btn btn--medium\"><span class=\"btn__icon\"><svg class=\"brei-icon brei-icon-chevron\" focusable=\"false\"><use href=\"#brei-icon-chevron\"></use></svg></span><span class=\"show-for-sr\">Previous Page</span></a></li></ul>';\n\t\t\n\t\t$('.aggregate__pagination').html(output);\n\t\t$('.pagination__button, .pagination__link').on('click', aggregate.filterPagination); // rebind UI actions\n\t},\n\n\t// build and render retrieved results \n\trenderResults() {\n\t\t// hide the loading animation\n\t\t$('.aggregate__loading').hide();\n\n\t\t// if this is not the initial set-up of the aggregate, zero out any featured results on the page\n\t\tif(aggregate.initial === false) {\n\t\t\t$('.aggregate__feature').empty();\n\t\t}\n\n\t\t// if there are results, render the count, results, and pagination then fade them in\n\t\tif(aggregate.results[0].TotalCount > 0) {\n\t\t\taggregate.renderCount();\n\t\t\t$('.aggregate__count').fadeIn();\n\t\t\t$('.aggregate__results').html(aggregate.results[0].Results).fadeIn();\n\t\t\tif(aggregate.results[0].TotalCount > aggregate.filters['pagesize']) {\n\t\t\t\taggregate.renderPagination();\n\t\t\t\t$('.aggregate__pagination').fadeIn();\n\t\t\t}\n\t\t} else {\n\t\t\t$('.aggregate__results').html('<p class=\"aggregate__none\">No matching results were found.</p>').fadeIn();\t\n\t\t}\n\n\t\t// set the state of the machine so we know to zero the featured results next time\n\t\taggregate.initial = false;\n\t},\n\n\t// update filters elements based on filters\n\tsetControls() {\n\t\t// unbind all UI actions\n\t\taggregate.unbindUIActions();\n\n\t\t// uncheck every checkbox\n\t\taggregate.elem.$checkboxes.find('input').prop('checked',false);\n\t\t\n\t\tfor (let key in aggregate.filters) {\n\t\t\t// if the filter is an array (i.e. a checkbox) loop through the array and check every checkbox in it\n\t\t\tif (aggregate.filters.hasOwnProperty(key)) {\n\t\t\t\tif (Array.isArray(aggregate.filters[key])) {\n\t\t\t\t\tfor (let i = 0; i < aggregate.filters[key].length; i = i + 1) {\n\t\t\t\t\t\t$('#' + key + '-' + aggregate.filters[key][i]).prop('checked',true);\n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t\telse {\n\t\t\t\t\t// if the filter is not an array, or the pageindex or pagesize parameters\n\t\t\t\t\tif((key !== 'pageindex') && (key !== 'pagesize') && (aggregate.filters[key] !== '')) {\n\t\t\t\t\t\tlet keyid = '#' + key;\n\t\t\t\t\t\t// if the filter is a keyword search (input box) set its value\n\t\t\t\t\t\tif( $(keyid)[0].localName === 'input' ) {\n\t\t\t\t\t\t\t$(keyid)[0].value = aggregate.filters[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if the filter is a selectbox, update its value and trigger the change event for selectability\n\t\t\t\t\t\tif( $(keyid)[0].localName === 'select' ) {\n\t\t\t\t\t\t\t$(keyid).val(aggregate.filters[key]).trigger('change').addClass('js-selectability--has-value');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// rebind UI actions\n\t\taggregate.bindUIActions();\n\t},\n\n\t// update queryString based on filters\n\tsetQuery(reposition, push) {\n\t\t// build the request to the datasource\n\t\t\n\t\tlet query = aggregate.buildQuery();\n\t\tlet dataObj = aggregate.getData(query);\n\n\t\t// if reposition is true, scroll to the top of the results\n\t\tif (reposition === true) {\n\t\t\t$('html, body').animate({ scrollTop: $('.aggregate__content').offset().top }, 425);\n\t\t}\n\n\t\t// if push is true, add the new page state to the browser history; otherwise, just replace the page state\n\t\tif (push === true) {\n\t\t\thistory.pushState(null, '', '?' + query);\n\t\t} else {\n\t\t\thistory.replaceState(null, '', '?' + query);\n\t\t}\n\t\t\n\t\t// show the \"loading\" animation, then fade out and empty all other page elements\n\t\t$('.aggregate__loading').show();\n\t\t$('.aggregate__count').fadeOut().empty();\n\t\t$('.aggregate__results').fadeOut().empty();\n\t\t$('.aggregate__pagination').fadeOut().empty();\n\n\t\t// send a request to the data source; when it is finished render the results\n\t\t$.when(dataObj)\n\t\t\t.done(function(data) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\taggregate.results = JSON.parse(data);\n\t\t\t\t\taggregate.renderResults();\n\t\t\t\t}, 500);\n\t\t\t})\n\t\t\t.fail(function () {\n\t\t\t\tconsole.log('API ERROR: No results were returned')\n\t\t\t});\n\t}\n\n};\n\nexport {aggregate};\n","import { ready } from 'brei-project-utils';\n\nclass Textarea {\n\tconstructor(element, options) {\n\t\tthis.defaults = { // Defaults\n\t\t\tmaxlength: ($(element).attr('maxlength')) ? $(element).attr('maxlength') : 999\n\t\t};\n\t\tthis.element = element;\n\t\tthis.options = $.extend({}, this.defaults, options);\n\t\tthis.enabled = ($(element).attr('maxlength')) ? true : false;\n\n\t\tif (this.enabled) {\n\t\t\tthis.init();\n\t\t}\n\t}\n\n\tinit() {\n\t\tthis.appendCount();\n\t\tthis.bindUIActions();\n\t}\n\n\tbindUIActions() {\n\t\t$(this.element).on('keyup', this.onKeyUp.bind(this));\n\t\t$(this.element).on('render', this.render.bind(this));\n\n\t\tready(() => {\n\t\t\t$(this.element).trigger('render', [$(this.element).val().length, this.options.maxlength]);\n\t\t});\n\t}\n\n\tonKeyUp(e) {\n\t\tconst count = $(e.target).val().length;\n\n\t\t$(e.target).trigger('render', [count, this.options.maxlength]);\n\t}\n\n\tpad(n) {\n\t\treturn (n < 100 && n >= 10) ? (`${n}`) : (n < 10) ? (`0${n}`) : n;\n\t}\n\n\trender(e, count, maxlength) {\n\t\tconst $textCount = $(e.target).parent('.form__field').find('.form__text-count');\t\t\n\t\tconst remaining = maxlength - count;\t\t\n\t\t$textCount.empty().text(`${this.pad(remaining)}/${maxlength} Characters Remaining`);\n\n\t}\n\n\tappendCount() {\n\t\tconst parent = $(this.element).parent('.form__field');\n\n\t\tif (parent.length > 0) {\n\t\t\tconst $textCount = parent.find('.form__text-count');\n\n\t\t\tif ($textCount.length <= 0) {\n\t\t\t\tparent.append('<div class=\"form__text-count\"></div>');\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport { Textarea }\n","import { plugin } from '../lib/plugin';\nimport { Textarea } from './textarea';\n\nconst forms = {\n\n\tvalidClass: 'form__field--is-valid',\n\tinvalidClass: 'form__field--is-invalid',\n\n\telem: {\n\t\t$body: $('body'),\n\t\t$selects: $('select:not([multiple])'),\n\t\t$textarea: $('textarea')\n\t},\n\n\tinit() {\n\t\t// Init plugins\n\t\tplugin('Textarea', Textarea);\n\n\t\tthis.bindUIActions();\n\t\tthis.selectability();\n\t},\n\n\tbindUIActions() {\n\n\t\tthis.elem.$body\n\t\t\t.on('click', '.form input[type=\"submit\"], .form button[type=\"submit\"]', this.onClick.bind(this))\n\t\t\t.on('input', 'input,textarea', this.input.bind(this))\n\t\t\t.on('change', this.elem.$selects, this.input.bind(this));\n\n\t\tthis.elem.$textarea.Textarea();\n\n\t},\n\n\tcheckFormValid() {\n\t\tlet $invalid = $('.form [required]:invalid');\n\n\t\treturn ($invalid.length <= 0);\n\t},\n\n\tonClick(e) {\n\t\tlet $form = $(e.target).parents('form');\n\n\t\tif ($form.hasClass('mobile-search')) {\n\t\t\treturn;\n\t\t}\n\n\t\t$form.addClass('js-was-submitted');\n\n\t\tif (!$form.hasClass('js-is-valid')) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tif (this.checkFormValid()) {\n\t\t\t$form.addClass('js-is-valid');\n\t\t\t$form[0].submit();\n\t\t} else {\n\t\t\tlet $field = $('[required]:invalid').first().closest('.form__field');\n\n\t\t\t$('[required]').each((i) => {\n\t\t\t\tthis.input($(`[required]:eq(${i.toString()})`));\n\t\t\t});\n\n\t\t\tscrollToTop($field, 425);\n\t\t}\n\t},\n\n\tinput(e) {\n\t\tlet $input = (e.length) ? e : $(e.target);\n\t\t// let isRequired = typeof $input.attr('required') !== 'undefined' && $input.attr('required') !== false;\n\t\tlet isEmpty = $input.val() === '';\n\n\t\tif ($input.is(':invalid')) {\n\t\t\t$input.parent('.form__field').removeClass(this.validClass).addClass(this.invalidClass);\n\t\t} else {\n\t\t\tif (!isEmpty) {\n\t\t\t\t$input.parent('.form__field').removeClass(this.invalidClass).addClass(this.validClass);\n\t\t\t} else {\n\t\t\t\t$input.parent('.form__field').removeClass(this.invalidClass).removeClass(this.validClass);\n\t\t\t}\n\t\t}\n\t},\n\n\tselectability() {\n\t\tif (this.elem.$selects.length > 0) {\n\t\t\tthis.elem.$selects.selectability({\n\t\t\t\t'position': 'above',\n\t\t\t\t'floatLabel': 'true'\n\t\t\t});\n\t\t\t\n\n\t\t\t$('.selectability[aria-disabled=\"true\"]').attr('tabindex', '-1');\n\t\t}\n\t}\n\n};\n\nexport { forms };\n","/**\n * Generate a jQuery plugin\n * @name plugin\n * @param pluginName [string] Plugin name\n * @param className [object] Class of the plugin\n * @param shortHand [bool] Generate a shorthand as $.pluginName\n */\nconst plugin = function plugin(pluginName, className, shortHand = false) {\n\tlet dataName = `__${pluginName}`;\n\tlet old = $.fn[pluginName];\n\n\t$.fn[pluginName] = function (options) {\n\t\treturn this.each(function () {\n\t\t\tlet $this = $(this);\n\t\t\tlet data = $this.data(dataName);\n\n\t\t\tif (!data) {\n\t\t\t\t$this.data(dataName, (data = new className(this, options)));\n\t\t\t}\n\n\t\t\tif (typeof options === 'string') {\n\t\t\t\tdata[options]();\n\t\t\t}\n\t\t});\n\t};\n\n\t// - Short hand\n\tif (shortHand) {\n\t\t$[pluginName] = (options) => $({})[pluginName](options);\n\t}\n\n\t// - No conflict\n\t$.fn[pluginName].noConflict = () => $.fn[pluginName] = old;\n}\n\nexport { plugin };","import { ready } from 'brei-project-utils';\n\nimport { aggregate } from './modules/aggregate';\nimport { forms } from './modules/forms';\n\nconst results = {\n\tinit() {\n\t\tforms.init();\n\t\taggregate.init();\n\t}\n};\n\nready(function () {\n\tresults.init();\n});\n"],"names":["window","matchMedia","ready","callbackFunc","document","readyState","addEventListener","attachEvent","Object","assign","aggregate","elem","$checkboxes","$","$chips","$keywords","$pagination","$reset","$results","$selects","dataSource","filters","initial","results","suggestions","init","this","data","buildFilters","getQuery","setControls","buildChips","setQuery","onpopstate","filterState","on","filterReset","bindUIActions","find","filterCheckbox","filterKeyword","filterSelect","unbindUIActions","off","addChip","key","label","output","prepend","unfilterChip","removeChip","remove","e","preventDefault","target","currentTarget","hash","value","substr","type","trigger","localName","selectedIndex","siblings","innerHTML","removeClass","keyid","hasOwnProperty","Array","isArray","length","i","keycheck","innerText","options","text","each","id","buildQuery","query","toString","push","encodeURIComponent","join","replace","substring","indexOf","checked","splice","filter","keyCode","trim","safeValue","filterPagination","prop","val","html","getData","deferred","Deferred","ajax","url","method","dataType","success","resolve","error","jqXHR","textStatus","errorThrow","console","log","reject","promise","location","search","URLSearchParams","forEach","undefined","split","renderCount","pageindex","pagesize","maxCount","TotalCount","renderPagination","items","current","parseInt","max","Math","ceil","x","sort","a","b","classy","renderResults","hide","empty","fadeIn","Results","addClass","reposition","dataObj","animate","scrollTop","offset","top","history","pushState","replaceState","show","fadeOut","when","done","setTimeout","JSON","parse","fail","Textarea","element","_classCallCheck","defaults","maxlength","attr","extend","enabled","appendCount","_this","onKeyUp","bind","render","count","n","concat","remaining","parent","pad","append","forms","validClass","invalidClass","$body","$textarea","pluginName","className","shortHand","arguments","dataName","old","fn","$this","noConflict","plugin","selectability","onClick","input","checkFormValid","$form","parents","hasClass","submit","$field","first","closest","scrollToTop","$input","isEmpty","is"],"sourceRoot":""}