(()=>{"use strict";const e=window.wp.element,t=window.wp.blockEditor,l=window.wp.data,n=window.wp.components,a=window.wp.blocks,o=JSON.parse('{"u2":"cofctheme/tag-grid"}');window.React,(0,a.registerBlockType)(o.u2,{title:"CofC Tag Grid",edit:({attributes:a,setAttributes:o,isSelected:i})=>{const r=(0,l.useSelect)((e=>e("core").getEntityRecords("taxonomy","post_tag",{per_page:-1})),[]),{tags:c,columns:m,title:s,includeLink:d,linkUri:g,linkText:p,linkNewTab:u}=a,h=(0,t.useBlockProps)({className:"custom-block "+(i?"is-selected":"")});return(0,e.createElement)("div",h,(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:"Block Settings",initialOpen:!0},(0,e.createElement)(n.TextControl,{label:"Title",help:"What should the heading above this grid of posts say?",value:s,onChange:e=>{o({title:e})}}),(0,e.createElement)(n.RangeControl,{label:"Columns",value:m,min:1,max:4,onChange:e=>{o({columns:e})}}),(0,e.createElement)(n.ToggleControl,{label:"Include a link below the grid to another page?",checked:d,onChange:e=>{o({includeLink:e})}}),d?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.ToggleControl,{label:"Open in a New Tab?",checked:u,onChange:e=>{o({linkNewTab:e})}}),(0,e.createElement)(n.TextControl,{label:"Link Text",help:"What text should display for the link?",onChange:e=>{o({linkText:e})},value:p}),(0,e.createElement)(n.TextControl,{label:"Link URI",help:"Provide the URL to link to",onChange:e=>{o({linkUri:e})},type:"url",value:g})):"",(0,e.createElement)(n.SelectControl,{label:"Tags",multiple:!0,help:"Hold CTRL (or CMD) to select multiple tags or unselect a tag",value:c.map((e=>e.id)),options:r?r.map((e=>({value:e.id,label:e.name}))):[],onChange:e=>{e=e.map((e=>parseInt(e)));const t=[...c].filter((t=>e.includes(t.id)));e.forEach((e=>{t.find((t=>t.id===e))||t.push(r.find((t=>t.id==e)))})),o({tags:t})},menuPlacement:"bottom",menuPosition:"fixed",style:{height:"200px"},filterOption:(e,t)=>e.label.toLowerCase().includes(t.toLowerCase()),isSearchable:!0}),(0,e.createElement)(e.Fragment,null,c.length>0&&c.map(((l,n)=>(0,e.createElement)("div",{key:n,style:{margin:"1rem",textAlign:"center",paddingBottom:"0.5rem"}},(0,e.createElement)(t.MediaUploadCheck,null,(0,e.createElement)(t.MediaUpload,{onSelect:e=>{console.log(e);const t=[...c];t[n].image=e,o({tags:t})},value:JSON.stringify(l.image),render:({open:t})=>(0,e.createElement)("div",null,l.image&&(0,e.createElement)("img",{src:l.image.url,alt:l.image.alt,style:{maxWidth:"100px",maxHeight:"100px"}}),(0,e.createElement)("button",{style:{whiteSpace:"normal",lineHeight:"1.5",padding:"0.5rem",height:"auto"},className:"components-button is-primary",onClick:t},l.image?`Change Thumbnail for Tag: ${l.name}`:`Select Thumbnail for Tag: ${l.name}`))})))))))),(0,e.createElement)("div",{className:"block-preview wp-block",style:{border:"1px solid black",margin:"0.3rem"}},(0,e.createElement)("div",null,(0,e.createElement)("code",null,'PREVIEW PAGE TO VIEW TAG GRID "',s,'"'))))}})})();